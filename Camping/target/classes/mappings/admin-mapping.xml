<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappings.admin-mapping">
	
	<select id="getAdmin" resultType="admin">
		SELECT * FROM admin WHERE id=#{id}
	</select>
	
	<select id="confirmID" resultType="String">
		SELECT password FROM admin WHERE id=#{id}
	</select>
	
	<!-- 회원탈퇴 -->
<select id = "deleteRiviews" >
	DELETE FROM reviews WHERE rseq=#{rseq}
	
	</select>
	
	<select id="countReviewlist" parameterType="String" resultType="int">
		SELECT COUNT(*) FROM reviews
		<if test='title !=null'>
			WHERE title LIKE '%'||#{title}||'%'
		</if>
	</select>
	
	<select id="listWithPaging" parameterType="hashMap" resultType="admin">

		SELECT rseq,title,content,campingname,indate,count, id
			FROM
				(
				SELECT row_number() over(ORDER BY indate DESC) rn,rseq,title,content,campingname,indate,count, id
					FROM reviews
					<if test='title !=null'>
						WHERE title LIKE '%'||#{title}||'%'
					</if>
							
				)
	<![CDATA[
				WHERE rn<=#{criteria.pageNum} * #{criteria.rowsPerPage}  
					AND rn>=(#{criteria.pageNum}-1) * #{criteria.rowsPerPage}
					ORDER BY rseq DESC
	]]>
	
	</select>
	
	<select id="detailReviews" resultType="admin">
		SELECT rseq,title,content,id,campingname,indate,count
			 FROM reviews
				WHERE rseq=#{rseq}
	</select>
	
	
	
	

</mapper>