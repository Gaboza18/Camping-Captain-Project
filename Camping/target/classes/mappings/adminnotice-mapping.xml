<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappings.adminnotice-mapping">

<select id="adminNotice" resultType="adminnotice">
		SELECT * FROM adminnotice
			ORDER BY aseq DESC
	</select>
	
	<update id="updateViewCount">
		UPDATE adminnotice 
			SET count=count+1 
				WHERE aseq=#{aseq}
	</update>
	
	<select id="countReviewlist" parameterType="String" resultType="int">
		SELECT COUNT(*) FROM reviews
		<if test='title !=null'>
			WHERE title LIKE '%'||#{title}||'%'
		</if>
	</select>

<select id="listWithPaging" parameterType="hashMap" resultType="adminnotice">

		SELECT aseq,title,content,indate,count,id
			FROM
				(
				SELECT row_number() over(ORDER BY indate DESC) rn,aseq,id,title,content,id,indate,count 
					FROM adminnotice
					<if test='title !=null'>
						WHERE title LIKE '%'||#{title}||'%'
					</if>
							
				)
	<![CDATA[
				WHERE rn<=#{criteria.pageNum} * #{criteria.rowsPerPage}  
					AND rn>=(#{criteria.pageNum}-1) * #{criteria.rowsPerPage}
					ORDER BY rseq DESC
	]]>
		
	</select>






</mapper>